#suite Frame

#include "fcs.c"
#include "hdlc.c"


#test check_read_frame
uint8_t encoded_frame[] = {
  0x7e, 0xff, 0x7d, 0x23, 0xc0, 0x21, 0x7d, 0x21,
  0x7d, 0x21, 0x7d, 0x20, 0x7d, 0x34, 0x7d, 0x22,
  0x7d, 0x26, 0x7d, 0x20, 0x7d, 0x20, 0x7d, 0x20,
  0x7d, 0x20, 0x7d, 0x25, 0x7d, 0x26, 0xfc, 0x7d,
  0x3c, 0xec, 0xe3, 0x7d, 0x27, 0x7d, 0x22, 0x7d,
  0x28, 0x7d, 0x22, 0x48, 0xe8, 0x7e
};

FILE* stream = fmemopen(encoded_frame, sizeof(encoded_frame), "rb");
uint8_t buffer[100];
int len = hdlc_read_frame(stream, buffer);
ck_assert_uint_eq(len, 26);
ck_assert_uint_eq(buffer[0], 0xff);
ck_assert_uint_eq(buffer[1], 0x03);
ck_assert_uint_eq(buffer[2], 0xC0);
ck_assert_uint_eq(buffer[3], 0x21);
